{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="favicon.png" rel="icon" type="image/png" />
    <title>Search</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="{% static 'assets/css/icons.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/uikit.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/tailwind.css' %}" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <style>
      /* Only keeping essential animations and effects that can't be replicated with Tailwind */
      @layer utilities {
        .bg-gradient-primary {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .backdrop-blur-header {
          backdrop-filter: blur(10px);
          background: rgba(255, 255, 255, 0.95);
        }
        
        .shadow-header {
          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .header-gradient {
          background: linear-gradient(45deg, #667eea, #764ba2);
        }
        
        .card-shadow {
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .card-hover-shadow {
          box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }
        
        .text-shadow {
          text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
        }
      }
      
      /* Original search card styles preserved */
      .search-card {
        background: white;
        border-radius: 15px;
        padding: 2rem;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      
      .search-card:hover {
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
      }
      
      .search-item {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 1rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        border: 1px solid #f0f0f0;
      }
      
      .search-item:hover {
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
      }
    </style>
  </head>

  <body class="font-sans bg-gradient-primary m-0 p-0 min-h-screen">
    <header class="backdrop-blur-header shadow-header sticky top-0 z-50 mt-0">
      <div class="flex justify-between items-center p-4 lg:px-8 max-w-6xl mx-auto w-full">
        <div class="flex items-center gap-8 flex-1">
          <!-- Logo -->
          <div id="logo" class="flex-shrink-0">
            <a href="{% url 'home' %}" class="no-underline">
              <h1 class="text-blue-600 m-0 text-2xl font-bold">Social Book</h1>
            </a>
          </div>

          <!-- Search -->
          <div class="flex items-center bg-white rounded-full px-4 py-2 shadow-lg transition-all duration-300 flex-1 max-w-md focus-within:shadow-xl">
            <input
              type="text"
              placeholder="Search for username.."
              class="border-none outline-none p-2 text-base flex-1 min-w-48 bg-transparent"
            />
            <button type="submit" class="bg-blue-600 hover:bg-blue-700 border-none text-white px-4 py-2 rounded-full cursor-pointer transition-all duration-300">
              <i class="fa fa-search fa-1x"></i>
            </button>
          </div>
        </div>

        <div class="flex items-center gap-6 flex-shrink-0">
          <!-- Upload -->
          <a href="{% url 'home' %}" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-full no-underline font-semibold transition-all duration-300 hover:-translate-y-0.5 shadow-lg">
            Back to Feed
          </a>
        </div>
      </div>
    </header>

      <div class="max-w-6xl mx-auto my-8 px-8">
        <!-- Search Results Header -->
        <div class="search-card text-center mb-8">
          <h4 class="text-gray-800 text-2xl m-0 font-semibold">
            Search Results for
            <span class="text-blue-600 font-bold">"{{ username }}"</span>
          </h4>
        </div>

        <!-- Search Results -->
        <div class="space-y-4">
          {% for user in users %}
          <div class="search-item">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-4">
                <a href="{% url 'profile' user.username %}">
                  <img
                    src="{% if user.profile.profilepic and user.profile.profilepic.url %}{{ user.profile.profilepic.url }}{% else %}/media/profile_pics/blank-profile-picture.png{% endif %}"
                    class="w-16 h-16 rounded-full object-cover border-2 border-blue-200"
                    alt="Profile"
                  />
                </a>
                <div class="flex flex-col">
                  <h5 class="text-gray-800 text-xl font-semibold m-0 mb-1">
                    <a href="{% url 'profile' user.username %}" class="text-gray-800 no-underline hover:text-blue-600 transition-colors">
                      {{ user.username }}
                    </a>
                  </h5>
                  {% if user.profile.bio %}
                  <p class="text-gray-600 text-sm m-0">{{ user.profile.bio|truncatewords:10 }}</p>
                  {% endif %}
                </div>
              </div>
              <a
                href="{% url 'profile' user.username %}"
                class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-full no-underline font-semibold transition-all duration-300 hover:-translate-y-0.5"
              >
                View Profile
              </a>
            </div>
          </div>
          {% empty %}
          <div class="search-card text-center">
            <div class="text-gray-500 text-lg">
              <i class="fa fa-search text-4xl mb-4 text-gray-400"></i>
              <h5 class="text-xl font-semibold text-gray-700 mb-2">No results found</h5>
              <p class="text-gray-600">
                No users found for "<span class="font-semibold">{{ username }}</span>".
                <br />
                Try searching with a different username.
              </p>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </style>
  </head>

  <body class="font-sans bg-gradient-primary m-0 p-0 min-h-screen">
    <form action="" method="POST">
      {% csrf_token %}
      <header class="backdrop-blur-header shadow-header sticky top-0 z-50 mt-0">
        <div class="flex justify-between items-center p-4 lg:px-8 max-w-6xl mx-auto w-full">
          <div class="flex items-center gap-8 flex-1">
            <!-- Logo -->
            <div id="logo" class="flex-shrink-0">
              <a href="{% url 'home' %}" class="no-underline">
                <h1 class="text-blue-600 m-0 text-2xl font-bold">Social Book</h1>
              </a>
            </div>

            <!-- Search -->
            <div class="flex items-center bg-white rounded-full px-4 py-2 shadow-lg transition-all duration-300 flex-1 max-w-md focus-within:shadow-xl">
              <input
                type="text"
                name="username"
                placeholder="Search for username.."
                class="border-none outline-none p-2 text-base flex-1 min-w-48 bg-transparent"
              />
              <button type="submit" class="bg-blue-600 hover:bg-blue-700 border-none text-white px-4 py-2 rounded-full cursor-pointer transition-all duration-300">
                <i class="fa fa-search fa-1x"></i>
              </button>
            </div>
          </div>

          <div class="flex items-center gap-6 flex-shrink-0">
            <!-- welcome user -->
            <span class="text-white font-medium">
              Welcome <strong>{{user.username}}</strong>
            </span>

            <!-- Back to Feed -->
            <a href="{% url 'home' %}" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-full no-underline font-semibold transition-all duration-300 hover:-translate-y-0.5 shadow-lg">
              Back to Feed
            </a>
          </div>
        </div>
      </header>

      <div class="max-w-6xl mx-auto my-8 px-8">
        <!-- Search Results Header -->
        <div class="search-card text-center mb-8">
          <h4 class="text-gray-800 text-2xl m-0 font-semibold">
            Search Results for
            <span class="text-blue-600 font-bold">"{{ username }}"</span>
          </h4>
        </div>

        <!-- Search Results -->
        <div class="space-y-4">
          {% if username_profile_list %}
            {% for users in username_profile_list %}
            <div class="search-item">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                  <a href="/profile/{{users.user}}">
                    <img
                      src="{% if users.profileimg and users.profileimg.url %}{{ users.profileimg.url }}{% else %}/media/profile_pics/blank-profile-picture.png{% endif %}"
                      class="w-16 h-16 rounded-full object-cover border-2 border-blue-200"
                      alt="Profile"
                    />
                  </a>
                  <div class="flex flex-col">
                    <h5 class="text-gray-800 text-xl font-semibold m-0 mb-1">
                      <a href="/profile/{{users.user}}" class="text-gray-800 no-underline hover:text-blue-600 transition-colors">
                        @{{ users.user }}
                      </a>
                    </h5>
                    {% if users.bio %}
                    <p class="text-gray-600 text-sm m-0">{{ users.bio|truncatewords:10 }}</p>
                    {% endif %}
                    {% if users.location %}
                    <p class="text-gray-500 text-xs m-0">{{ users.location }}</p>
                    {% endif %}
                  </div>
                </div>
                <a
                  href="/profile/{{users.user}}"
                  class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-full no-underline font-semibold transition-all duration-300 hover:-translate-y-0.5"
                >
                  View Profile
                </a>
              </div>
            </div>
            {% endfor %}
          {% elif request.method == 'POST' %}
          <div class="search-card text-center">
            <div class="text-gray-500 text-lg">
              <i class="fa fa-search text-4xl mb-4 text-gray-400"></i>
              <h5 class="text-xl font-semibold text-gray-700 mb-2">No results found</h5>
              <p class="text-gray-600">
                No users found for "<span class="font-semibold">{{ username }}</span>".
                <br />
                Try searching with a different username.
              </p>
            </div>
          </div>
          {% endif %}
        </div>
      </div>
    </form>

    <!-- Scripts -->
    <script src="{% static 'assets/js/tippy.all.min.js' %}"></script>
    <script src="{% static 'assets/js/jquery-ultra-minimal.js' %}"></script>
    <script src="{% static 'assets/js/uikit.js' %}"></script>
    <script src="{% static 'assets/js/simplebar.min.js' %}"></script>
    <script src="{% static 'assets/js/custom.js' %}"></script>
    <script src="{% static '../../unpkg.com/ionicons%405.2.3/dist/ionicons.js' %}"></script>
  </body>
</html>

